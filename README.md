
RESTful API для работы с клиентами и их контактами:  Spring Boot, Spring MVC, Maven, PostgreSQL, ModelMapper, Enum, REGEXP, JSON, GIT

Описание эндпоинтов:

/clients

GET /clients: Получение списка всех клиентов в виде списка объектов ClientDTO. Валидация данных о клиенте выполняется на стороне сервера, и в случае ошибок валидации возвращается список ошибок.

GET /clients/{id}: Получение информации о клиенте с указанным id в виде объекта ClientDTO. Если клиент с указанным id не найден, возвращается код 404 Not Found.

POST /clients: Создание нового клиента. Данные клиента передаются в виде объекта ClientDTO. Если данные клиента не прошли валидацию, возвращается список и сообщения ошибок. В случае успешного создания клиента, возвращается объект ClientDTO с присвоенным id.

PUT /clients/{id}: Обновление информации о клиенте с указанным id. Данные для обновления передаются в виде объекта ClientDTO. Если данные не прошли валидацию, то возвращаются сообщения ошибок, или если клиент с указанным id не найден, возвращается код 404 Not Found.

DELETE /clients/{id}: Удаление клиента с указанным id. Если клиент с указанным id не найден, возвращается код 404 Not Found. В случае успешного удаления, возвращается код 204 No Content.


/clients/{clientId}/contacts

GET /clients/{clientId}/contacts: Получение списка всех контактов для клиента с указанным clientId в виде списка объектов ContactDTO. Если клиент с указанным clientId не найден, возвращается код 404 Not Found.

GET /clients/{clientId}/contacts/{contactType}: Получение списка контактов для клиента с указанным clientId и указанным типом контакта (contactType) в виде списка объектов ContactDTO. Если клиент с указанным clientId не найден или указанный тип контакта не поддерживается, возвращается код 404 Not Found или 400 Bad Request.

POST /clients/{clientId}/contacts: Создание нового контакта для клиента с указанным clientId. Данные контакта передаются в виде объекта ContactDTO. Если данные контакта не прошли валидацию или клиент с указанным clientId не найден, возвращается список ошибок. В случае успешного создания контакта, возвращается объект ContactDTO. ! В этом запросе contactType определяется автоматически, поэтому в JSON можно указать только {"contactValue" : "angel@mail.ru"} . Так же можно указывать ContactType в ручную в JSON.

DELETE /clients/{clientId}/contacts/{id}: Удаление контакта с указанным id для клиента с указанным clientId. Если клиент с указанным clientId не найден или контакт с указанным id не найден, возвращается код 404 Not Found. В случае успешного удаления, возвращается код 204 No Content.

Описание реализации:

В папке dto хранятся классы DTO (Data Transfer Object) для передачи данных между клиентом и сервером. DTO используются для определения формата данных, которые клиенты могут отправлять на сервер и ожидать от сервера. В DTO нет полей id, в отличии от моделей, они не нужны для передачи в JSON.

Преобразование между моделями и DTO реализовано с помощью ModelMapper.

Выбор ContactType был реализован с помощью enum.

Автоматическое определение типа ContactType в проекте выполняется в методе determineContactType класса ContactService. Этот метод проверяет переданное значение контакта (contactValue) и на основе его формата определяет тип контакта.

Метод determineContactType сначала вызывает два метода isValidPhoneNumber и isValidEmail, чтобы проверить, соответствует ли значение контакта формату телефонного номера или email-адреса. Если значение соответствует формату телефонного номера, тип контакта устанавливается как ContactType.PHONE. Если значение соответствует формату email-адреса, тип контакта устанавливается как ContactType.EMAIL. В противном случае, тип контакта устанавливается как ContactType.UNKNOWN.

Для валидации ввода контактов используются регулярные выражения, в модели и DTO Contact, а так же в методах isValidPhoneNumber, isValidEmail.

При запуске приложения Spring Boot просканирует файлы проекта на аннотации JPA и автоматически создаст таблицы. 

SQL код также добавлен в проект в папке sql.

Примеры запросов:

POST http://localhost:8080/clients

{
"name" : "Александр Грин"
}

PUT http://localhost:8080/clients/1

{
"name" : "Диана Петрова"
}

POST  http://localhost:8080/clients/2/contacts

{
"contactValue" : "angel@mail.ru"
}










